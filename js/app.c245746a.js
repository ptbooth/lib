(function(){"use strict";var e={7405:function(e,t,o){o(8111),o(7588);var n=o(5130),a=o(6768);const i={class:"model-login-require"};function l(e,t,o,n,l,r){const s=(0,a.g2)("App"),c=(0,a.g2)("component__download_gui"),d=(0,a.g2)("component__font-picker"),u=(0,a.g2)("n-carousel-item"),p=(0,a.g2)("n-carousel"),h=(0,a.g2)("n-divider"),m=(0,a.g2)("n-button"),g=(0,a.g2)("n-flex"),f=(0,a.g2)("n-card"),_=(0,a.g2)("n-modal"),b=(0,a.g2)("n-image"),v=(0,a.g2)("n-loading-bar-provider"),k=(0,a.g2)("n-notification-provider"),y=(0,a.g2)("n-message-provider"),w=(0,a.g2)("n-dialog-provider"),x=(0,a.g2)("n-config-provider");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(x,{theme:e.darkTheme,locale:e.viVN,"date-locale":e.dateViVN},{default:(0,a.k6)(()=>[(0,a.bF)(w,null,{default:(0,a.k6)(()=>[(0,a.bF)(y,null,{default:(0,a.k6)(()=>[(0,a.bF)(k,null,{default:(0,a.k6)(()=>[(0,a.bF)(v,null,{default:(0,a.k6)(()=>[(0,a.bF)(s),(0,a.bF)(c),(0,a.bF)(d),(0,a.bF)(_,{show:e.show_login,"onUpdate:show":t[1]||(t[1]=t=>e.show_login=t)},{default:(0,a.k6)(()=>[(0,a.Lk)("div",i,[(0,a.bF)(p,{style:{height:"180px",overflow:"hidden"},autoplay:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[...t[2]||(t[2]=[(0,a.Lk)("img",{src:"https://file.hstatic.net/200000722513/file/tao-anh-bang-ai-1_b6ce6d48bcd54433be01dc947c0d875e_1024x1024.jpg",alt:"image"},null,-1)])]),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)(()=>[...t[3]||(t[3]=[(0,a.Lk)("img",{src:"https://cdn-media.sforum.vn/storage/app/media/wp-content/uploads/2023/07/hinh-nen-ai-98.jpg",alt:"image"},null,-1)])]),_:1})]),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)(()=>[t[6]||(t[6]=(0,a.Lk)("div",{class:"title"},"Yêu cầu đăng nhập!",-1)),t[7]||(t[7]=(0,a.Lk)("div",{class:"desc",style:{"margin-top":"8px"}},"Hãy đăng nhập để sử dụng những tính năng đặc biệt mà chúng tôi dành riêng cho bạn. ",-1)),(0,a.bF)(h),(0,a.bF)(g,{justify:"center"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{size:"large",ghost:"",type:"primary",onClick:t[0]||(t[0]=t=>e.show_login=!1)},{default:(0,a.k6)(()=>[...t[4]||(t[4]=[(0,a.eW)(" Bỏ qua ",-1)])]),_:1}),(0,a.bF)(m,{size:"large",type:"primary",onClick:e.$AF.$appFunc.redirectToGoogleAuth},{default:(0,a.k6)(()=>[...t[5]||(t[5]=[(0,a.Lk)("img",{style:{"background-color":"white",padding:"2px","border-radius":"50%"},src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/768px-Google_%22G%22_logo.svg.png",width:"24px",alt:""},null,-1),(0,a.eW)("   Đăng nhập ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["show"]),(0,a.bF)(b,{src:e.image_view.path,style:{display:"none"},ref:"image_view"},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["theme","locale","date-locale"])])}var r=o(7342),s=o(3822);function c(e,t,o,n,i,l){const r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(r)}o(4114),o(2489),o(116),o(1701);var d=o(2484),u=o(1387),p=o(4232);o(4603),o(7566),o(8721);var h=o(1241);var m=o(1114);class g{constructor({service_port:e,device_id:t=null}){(0,m.A)(this,"getCameras",()=>this.getJson({url_path:"/cameras"})),(0,m.A)(this,"getLUTs",()=>this.getJson({url_path:"/luts"})),(0,m.A)(this,"uploadLUT",async({file:e,name:t})=>{const o=new URL(this.base_url+"/luts/upload"),n=new FormData;n.append("file",e),n.append("name",t);let a=await fetch(o,{method:"POST",body:n});return await a.json()}),(0,m.A)(this,"getConfig",()=>this.getJson({url_path:"/config"})),(0,m.A)(this,"updateConfig",e=>this.postJson({url_path:"/config",body:e})),(0,m.A)(this,"getCameraStreamUrl",(e,t={})=>{const o=new URL(this.base_url+`/cameras/${e}`);return Object.keys(t).forEach(e=>o.searchParams.append(e,t[e])),o.toString()}),(0,m.A)(this,"getCameraSnapshotUrl",(e,t={})=>{const o=new URL(this.base_url+"/cameras/snapshot");return Object.keys(t).forEach(e=>o.searchParams.append(e,t[e])),o.toString()}),(0,m.A)(this,"stopCamera",e=>this.getJson({url_path:"/cameras/stream",method:"DELETE"})),(0,m.A)(this,"remoteTuyaCommand",({action:e})=>this.postJson({url_path:"/tuya",body:{action:e}})),(0,m.A)(this,"getBanks",()=>this.getJson({url_path:"/banks"})),(0,m.A)(this,"getPrinters",()=>this.getJson({url_path:"/printers"})),this.service_port=e,this.base_url=`http://localhost:${this.service_port}/api/v1`,this.device_id=t}async getJson({url_path:e,params:t={},method:o="GET"}){const n=new URL(this.base_url+e);Object.keys(t).forEach(e=>n.searchParams.append(e,t[e]));let a=await fetch(n,{method:o||"GET"});return await a.json()}async postJson({url_path:e,body:t={}}){const o=new URL(this.base_url+e);let n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await n.json()}async deleteLUT(e){let t=encodeURIComponent(e),o=await fetch(this.base_url+`/luts/${t}`,{method:"DELETE"});return await o.json()}}o(574);const f={class:"native-input-quantity"};function _(e,t,o,n,i,l){const r=(0,a.g2)("n-input-number");return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(r,{value:i.scopeValue,"onUpdate:value":t[0]||(t[0]=e=>i.scopeValue=e),step:o.step,size:o.size,parse:i.parse,format:i.format},null,8,["value","step","size","parse","format"])])}var b={name:"component__input-number",props:{modelValue:{type:Number,default:1},max:{type:Number,default:1e4},min:{type:Number,default:1},size:{type:String,default:"medium"},step:{type:Number,default:1}},data(){return{scopeValue:0,parse:e=>{const t=e.replace(/,/g,"").trim();return/^\d+(\.(\d+)?)?$/.test(t)?Number(t):""===t?null:Number.NaN},format:e=>null===e?"":e.toLocaleString("en-US")}},watch:{modelValue:function(e){e!==this.scopeValue&&(this.scopeValue=e)},scopeValue:function(e){if(e!==this.modelValue){let t=e;e>this.max&&(t=this.max),e<this.min&&(t=this.min),t!==e&&(this.scopeValue=t),this.$emit("update:modelValue",t)}}},beforeMount(){this.scopeValue=this.modelValue},methods:{sub(){let e=this.scopeValue-1;e<this.min&&(e=this.min),this.scopeValue=e,this.scopeValue!==this.modelValue&&this.$emit("update:modelValue",e)},add(){let e=this.scopeValue+1;e>this.max&&(e=this.max),this.scopeValue=e,this.scopeValue!==this.modelValue&&this.$emit("update:modelValue",e)}}};const v=(0,h.A)(b,[["render",_]]);var k=v;const y={class:"flex-3 title",style:{flex:"1"}},w={class:"modal-content"},x={class:"inner-scroll"},C={class:"modal-footer text-right"},F={key:1,class:"text-right"};function L(e,t,o,n,i,l){const r=(0,a.g2)("Icon"),s=(0,a.g2)("n-flex"),c=(0,a.g2)("n-infinite-scroll"),d=(0,a.g2)("n-button"),u=(0,a.g2)("n-spin");return(0,a.uX)(),(0,a.CE)("div",{class:(0,p.C4)({"model-content__wrapper":!0,"no-padding":o.no_padding,fixed:o.header_fixed}),style:(0,p.Tr)({width:o.width})},[(0,a.Lk)("div",{class:(0,p.C4)({"modal-header":!0,"no-padding":o.no_padding})},[o.is_custom_header?(0,a.RG)(e.$slots,"header",{key:0}):((0,a.uX)(),(0,a.Wv)(s,{key:1,align:"center",justify:"space-between"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",y,(0,p.v_)(o.title),1),(0,a.Lk)("button",{class:"btn-header-color",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,a.bF)(r,{icon:"solar:close-circle-bold",height:"20"})])]),_:1}))],2),(0,a.Lk)("div",w,[(0,a.bF)(c,{style:(0,p.Tr)({maxHeight:o.max_height})},{default:(0,a.k6)(()=>[(0,a.Lk)("div",x,[(0,a.RG)(e.$slots,"default")])]),_:3},8,["style"])]),(0,a.Lk)("div",C,[o.is_custom_footer?(0,a.RG)(e.$slots,"footer",{key:0}):((0,a.uX)(),(0,a.CE)("div",F,[o.show_bottom_back_button?((0,a.uX)(),(0,a.Wv)(d,{key:0,onClick:t[1]||(t[1]=t=>e.$emit("close")),type:"default",round:""},{default:(0,a.k6)(()=>[...t[2]||(t[2]=[(0,a.eW)(" Đóng ",-1)])]),_:1})):(0,a.Q3)("",!0),t[4]||(t[4]=(0,a.eW)("   ",-1)),o.action_hide?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(d,{key:1,round:"",type:o.action_type,disabled:o.action_disabled||o.action_loading,onClick:l.emitAction},{default:(0,a.k6)(()=>[o.action_loading?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(u,{stroke:"white",size:12}),t[3]||(t[3]=(0,a.eW)("   ",-1))],64)):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,p.v_)(o.action_text),1)]),_:1},8,["type","disabled","onClick"]))]))])],6)}var $={name:"component__modal-content",components:{Icon:d.In},props:{title:{type:String,default:""},width:{type:String,default:"500px"},no_padding:{type:Boolean,default:!1},hide_header:{type:Boolean,default:!1},is_custom_header:{type:Boolean,default:!1},hide_footer:{type:Boolean,default:!1},is_custom_footer:{type:Boolean,default:!1},action_loading:{type:Boolean,default:!1},action_type:{type:String,default:"primary"},action_text:{type:String,default:"Lưu thông tin"},action_disabled:{type:Boolean,default:!1},action_hide:{type:Boolean,default:!1},max_height:{type:String,default:"calc(100vh - 180px)"},header_fixed:{type:Boolean,default:!1},close_on_click_outside:{type:Boolean,default:!0},show_bottom_back_button:{type:Boolean,default:!0}},data(){return{}},methods:{emitAction(){this.$emit("action")}}};const V=(0,h.A)($,[["render",L]]);var A=V;o(2462);const E={style:{"max-width":"calc(100vh - 100px)","min-width":"300px",padding:"32px"}},j={style:{width:"100%"}},S={style:{"text-align":"left"}},P={style:{position:"relative"}},U={class:"custom-arrow"},W=["onClick"],R=["onClick"],T={class:"custom-dots"},I=["onClick"];function O(e,t,o,n,i,l){const r=(0,a.g2)("n-flex"),s=(0,a.g2)("n-skeleton"),c=(0,a.g2)("n-collapse-transition"),d=(0,a.g2)("Icon"),u=(0,a.g2)("n-input"),h=(0,a.g2)("n-button"),m=(0,a.g2)("n-image"),g=(0,a.g2)("n-carousel"),f=(0,a.g2)("n-scrollbar");return(0,a.uX)(),(0,a.Wv)(f,{class:"background-lib"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{justify:"center"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",E,[(0,a.bF)(c,{show:i.is_loading},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"label"},{default:(0,a.k6)(()=>[...t[0]||(t[0]=[(0,a.eW)(" Đang tải thư viện... ",-1)])]),_:1}),(0,a.Lk)("div",j,[(0,a.bF)(s,{style:{"margin-top":"12px",width:"600px","max-width":"100%",height:"400px","border-radius":"4px"}})])]),_:1},8,["show"]),(0,a.bF)(c,{show:i.image_url.length>0},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"label"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{align:"center",direction:"column"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{width:"32px",icon:"solar:calendar-date-bold-duotone"}),(0,a.Lk)("span",null,(0,p.v_)(new Date(1e3*i.info.created_at).toLocaleString()),1)]),_:1})]),_:1}),(0,a.Lk)("div",S,[t[2]||(t[2]=(0,a.Lk)("p",{class:"field-label",style:{color:"white"}},"Liên kết",-1)),(0,a.bF)(r,{align:"center"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{flex:"1"},value:l.shareURL,readonly:""},null,8,["value"]),(0,a.bF)(h,{type:"primary",onClick:l.copyShareUrl},{default:(0,a.k6)(()=>[...t[1]||(t[1]=[(0,a.eW)("Sao chép",-1)])]),_:1},8,["onClick"])]),_:1})]),t[3]||(t[3]=(0,a.Lk)("div",{style:{"margin-top":"16px"}},null,-1)),(0,a.Lk)("div",P,[(0,a.bF)(g,{"show-arrow":"",autoplay:""},{arrow:(0,a.k6)(({prev:e,next:t})=>[(0,a.Lk)("div",U,[(0,a.Lk)("button",{type:"button",class:"custom-arrow--left",onClick:e},[(0,a.bF)(d,{icon:"solar:alt-arrow-left-broken",width:"16px"})],8,W),(0,a.Lk)("button",{type:"button",class:"custom-arrow--right",onClick:t},[(0,a.bF)(d,{icon:"solar:alt-arrow-right-broken",width:"16px"})],8,R)])]),dots:(0,a.k6)(({total:e,currentIndex:t,to:o})=>[(0,a.Lk)("ul",T,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,e=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:(0,p.C4)({["is-active"]:t===e-1}),onClick:t=>o(e-1)},null,10,I))),128))])]),default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.image_url,e=>((0,a.uX)(),(0,a.Wv)(m,{src:e,lazy:"",width:"100%",style:{"border-radius":"8px"},"object-fit":"contain"},null,8,["src"]))),256))]),_:1})])]),_:1},8,["show"])])]),_:1})]),_:1})}var X={name:"lib",data(){return{is_loading:!0,image_url:[],image_blobs:[],info:{},is_failed:!1}},computed:{shareURL(){return window.location.href}},beforeMount(){this.getInfo()},beforeUnmount(){Array.isArray(this.image_url)&&this.image_url.forEach(e=>{try{URL.revokeObjectURL(e)}catch(t){}})},methods:{copyShareUrl(){navigator.clipboard.writeText(this.shareURL),this.$AF.$msgSuccess("Đã sao chép liên kết vào bộ nhớ tạm!")},async getInfo(){let e="https://zhikong.ai/api/v1/open-api/anonymous/library?"+new URLSearchParams({...this.$route.query||{}}).toString();this.is_loading=!0;let t=await fetch(e);try{let e=await t.json();const o=e?.data?.image_ids||[];this.image_url.length&&this.image_url.forEach(e=>{try{URL.revokeObjectURL(e)}catch(t){}}),this.image_url=[],this.image_blobs=[];const n=o.map(async e=>{const t="https://zhikong.ai/api/v1/cdn/"+encodeURIComponent(e);try{const e=await fetch(t);if(!e.ok)throw new Error(`Fetch failed ${e.status}`);const o=await e.blob(),n=URL.createObjectURL(o);return{blobUrl:n,blob:o}}catch(o){return console.error("Failed to fetch image id",e,o),null}}),a=await Promise.all(n);a.forEach(e=>{e&&(this.image_url.push(e.blobUrl),this.image_blobs.push(e.blob))}),this.info=e?.data||{},this.is_loading=!1}catch(o){console.log("e",o),this.is_loading=!1,this.is_failed=!0}}}};const N=(0,h.A)(X,[["render",O]]);var M=N;const B=[{path:"/:catchAll(.*)",name:"NotFound",component:M}],D=(0,u.aE)({history:(0,u.LA)("/lib/"),routes:B});var q=D;const G="https://invoice-lite.ipos.vn/api",z={IMAGE:"image/png,image/jpeg,image/jpg,image/webp",VIDEO:"video/mp4,video/webm,video/m4v,video/avi,video/mpeg",AUDIO:"audio/mp3,audio/mpeg,audio/wav",ANY:"*"},J=({save_subject:e=!1,download:t=!1,create_image:o=!1,increase_quality:n=!1,remove_subject_background:a=!1,create_video:i=!1,on_save_subject:l=()=>null,on_download:r=()=>null,on_create_image:s=()=>null,on_increase_quality:c=()=>null,on_remove_subject_background:d=()=>null,on_create_video:u=()=>null})=>[...e?[{label:"Lưu đối tượng",icon:"solar:gallery-wide-linear",onClick:l}]:[],...t?[{label:"Tải xuống",icon:"solar:cloud-download-linear",onClick:r}]:[],...o?[{label:"Tạo ảnh",icon:"solar:gallery-add-broken",onClick:s}]:[],...n?[{label:"Tăng chất lượng",icon:"solar:high-quality-broken",onClick:c}]:[],...a?[{label:"Xoá nền đối tượng",icon:"solar:file-remove-broken",onClick:d}]:[],...i?[{label:"Tạo Video",icon:"solar:videocamera-add-broken",onClick:u}]:[]],H={initialize:"KH nhập thông tin",payment:"KH đang thanh toán",pending:"Khởi tạo iPOS Invoice",signature:"Đang tạo CKS",tax_registration:"Gửi tờ khai CQT",pos_connect:"Kết nối điểm bán hàng",completed:"Đang sử dụng",failed:"Thanh lý, huỷ bỏ"};Object.keys(H).map(e=>({value:e,label:H[e]}));var K={$ntf:{},$loading:{},$msg:{},$question:{},$picker:({min:e,max:t,blob:o})=>new Promise(e=>{}),$cropper:()=>{},$appFunc:{getImageBase64:async e=>{const t=await fetch(e),o=await t.blob();return new Promise((e,t)=>{const n=new FileReader;n.readAsDataURL(o),n.onloadend=()=>e(n.result),n.onerror=t})},getImageBase64Loading:e=>new Promise(async t=>{K.$loading.start();let o=await K.$appFunc.getImageBase64(Q(e));K.$loading.finish(),o&&t(o)}),registrationProfileCreateOrUpdate:({base:e,callback:t})=>{}},$startDownload:({file_url:e,file_name:t,file_ex:o="png",download_callback:n,mime_type:a,is_get_blob_only:i=!1})=>{},$loginRequire:()=>{},$creationView:({creation_id:e,creation:t})=>null,$imageView:e=>({}),videoCutter:({videoUrl:e})=>new Promise(e=>{}),$fontPicker:({defaultFont:e})=>new Promise(e=>{}),$qConfirm:e=>new Promise(t=>{K.$question.info({title:"Xác nhận",content:e||"Bạn có chắc chắc chắn không?",positiveText:"Chắc chắn",negativeText:"Không",draggable:!0,showIcon:!1,onPositiveClick:()=>{t(!0)},onNegativeClick:()=>{t(null)},positiveButtonProps:{type:"primary"}})}),$handleError:e=>new Promise(t=>{if(e){let t=e;"object"===typeof e&&(t=JSON.stringify(e)),K.$msg.error({title:"Lỗi",content:t})}else t()}),$handleResponseError:async e=>new Promise(t=>{if(0===e?.error)t();else{let t=e.message||"Lỗi không xác định";"system_error"===t&&(t="Máy chủ gặp sự cố"),K.$msg.error(t)}}),$lockErrorResponse:async({error:e,result:t})=>new Promise(o=>{(async()=>{await K.$handleError(e),await K.$handleResponseError(t),o()})()}),$msgSuccess:e=>{let t=e&&e.message||e||"Success";K.$msg.success(t)},$msgWarning:e=>{let t=e&&e.message||e||"Warning";K.$msg.warning(t)},$uploadFileThread:({ref_list:e,on_upload_error:t})=>new Promise(o=>{(async()=>{let n=await Promise.all([...e.filter(e=>e.upload).map(e=>e.upload())]),a=n.find(e=>"string"!==typeof e&&(e.error||e.result.error));a?t&&t(a):o()})()}),$sortData:e=>(e.length>0&&"number"===typeof e[0].sort&&(e=e.sort((e,t)=>e.sort-t.sort)),e),$filter:{$currency:e=>(e||0).toLocaleString("vi-VN")}};const Q=e=>e?(e=e.toString(),e.startsWith("http")||e.startsWith("blob")||e.startsWith("data")?e:G+"/v1/cdn/"+encodeURIComponent(e)):e,Y={save_subject:async({url:e,b64:t})=>{e&&!t&&(t=await K.$appFunc.getImageBase64Loading(e)),e&&t&&K.$appFunc.subjectManagerSave({url:e,b64:t})},download:({url:e})=>{K.$startDownload({file_url:e,file_name:"Downloading"})},redirect:({url:e,path:t})=>q.push(`${t}?image=${encodeURIComponent(e)}`),create_image:({url:e})=>Y.redirect({url:e,path:"/creation/image"}),image_quality:({url:e})=>Y.redirect({url:e,path:"/creation/image/quality"}),image_remove_bg:({url:e})=>Y.redirect({url:e,path:"/creation/image/rm-bg"}),create_video:({url:e})=>Y.redirect({url:e,path:"/creation/video/from-image"})};var Z=o(7387),ee=o(4185),te=o(6909),oe=o(4751),ne={name:"App",data(){return{}},computed:{},beforeMount(){K.$msg=(0,Z.J)(),K.$ntf=(0,ee.h)(),K.$question=(0,te.s)(),K.$loading=(0,oe.z)()},mounted(){window.addEventListener("keyup",e=>{"F9"===e.key&&e.ctrlKey&&this.$router.push({path:"/setting",query:this.$route.query||{}})})},beforeDestroy(){},methods:{}};const ae=(0,h.A)(ne,[["render",c]]);var ie=ae;const le={class:"download-gui__container"},re={class:"flex-1"},se={class:"file-name"},ce={class:"file-path"};function de(e,t,o,n,i,l){const r=(0,a.g2)("n-progress"),s=(0,a.g2)("n-flex"),c=(0,a.g2)("n-scrollbar"),d=(0,a.g2)("n-popover");return(0,a.uX)(),(0,a.Wv)(d,{show:i.download_list.length>0,trigger:"manual",placement:"top-start"},{trigger:(0,a.k6)(()=>[...t[0]||(t[0]=[(0,a.Lk)("div",{class:"download-gui"},null,-1)])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",le,[(0,a.bF)(c,{style:{"max-height":"200px","min-height":"40px"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.download_list,o=>((0,a.uX)(),(0,a.Wv)(s,{key:o.file_url,class:"file-item",align:"center"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{type:"circle",percentage:o.percent,style:{width:"20px"},color:["red","grey","blue","green"][o.status+1]},{default:(0,a.k6)(()=>[...t[1]||(t[1]=[])]),_:1},8,["percentage","color"]),(0,a.Lk)("div",re,[(0,a.Lk)("div",se,(0,p.v_)(o.file_name),1),(0,a.Lk)("div",ce,(0,p.v_)(e.srcCDN(o.file_url).substr(0,36))+"...",1)])]),_:2},1024))),128))]),_:1})])]),_:1},8,["show"])}var ue={name:"component__download_gui",data(){return{show:!0,download_list:[],interval_check_download:null,maximum_thread:4}},beforeMount(){this.$AF.$startDownload=({file_url:e,file_name:t,file_ex:o="png",download_callback:n,mime_type:a,is_get_blob_only:i=!1})=>{this.download_list.map(e=>e.file_url);this.download_list.push({file_name:t,file_url:e,file_ex:o,start:new Date,status:0,percent:0,download_callback:n,mime_type:a,is_get_blob_only:i})},this.interval_check_download=setInterval(()=>{let e=this.download_list.filter(e=>0===e.status);if(e>this.maximum_thread)return;let t=e.find(e=>0===e.status);t&&this.downloadFile(t)},1e3)},methods:{async downloadFile(e){e.status=1;try{let t=this.srcCDN(e.file_url);const o=await fetch(t),n=o.body.getReader(),a=+o.headers.get("Content-Length");let i="";if(!i)for(;!i;){i=t.endsWith(".mp4")||t.endsWith(".m4v")?"video/mp4":t.endsWith(".mp3")?"audio/mpeg":t.endsWith(".wav")?"audio/wav":t.endsWith(".ogg")?"audio/ogg":t.endsWith(".webm")?"video/webm":t.endsWith(".gif")?"image/gif":t.endsWith(".png")?"image/png":t.endsWith(".jpg")||t.endsWith(".jpeg")?"image/jpeg":t.endsWith(".json")?"application/json":t.endsWith(".doc")?"application/msword":t.endsWith(".docx")?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t.endsWith(".xls")?"application/vnd.ms-excel":t.endsWith(".xlsx")?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t.endsWith(".pdf")?"application/pdf":t.endsWith(".zip")?"application/zip":t.endsWith(".rar")?"application/x-rar-compressed":"application/octet-stream";break}let l=0,r=[];for(;;){const{done:t,value:o}=await n.read();if(t)break;r.push(o),l+=o.length,e.percent=Math.floor(l/a*100)}let s=new Blob(r,{type:i,name:e.file_name||"downloaded_file"});s.name=e.file_name||"downloaded_file";const c=URL.createObjectURL(s);if(e.is_get_blob_only)e.download_callback&&e.download_callback(s),e.status=2;else{const o=document.createElement("a");o.href=c;let n=e.file_name||t.split("/").pop().split("?")[0];if(!n||!n.includes(".")){const t=e.file_ex||(i?i.split("/")[1]:"bin");n=`iPOSInvoice-file.${t}`}o.download=n,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(c),e.status=2}}catch(o){e.status=-1}let t=this.download_list.map(e=>e.file_url).indexOf(e.file_url);this.download_list.splice(t,1)}}};const pe=(0,h.A)(ue,[["render",de]]);var he=pe;const me={class:"font-picker"},ge=["onClick"],fe=["src"];function _e(e,t,o,n,i,l){const r=(0,a.g2)("Icon"),s=(0,a.g2)("n-input"),c=(0,a.g2)("n-flex"),d=(0,a.g2)("component_empty"),u=(0,a.g2)("n-col"),h=(0,a.g2)("n-row"),m=(0,a.g2)("n-scrollbar"),g=(0,a.g2)("component__modal-content"),f=(0,a.g2)("n-modal");return(0,a.uX)(),(0,a.CE)("div",me,[(0,a.bF)(f,{show:i.show,"onUpdate:show":t[2]||(t[2]=e=>i.show=e)},{default:(0,a.k6)(()=>[(0,a.bF)(g,{title:"Chọn Font chữ",width:"600px",onClose:t[1]||(t[1]=e=>i.show=!1),action_text:`Chọn (${i.selected_font})`,onAction:l.confirmSelectFont},{default:(0,a.k6)(()=>[(0,a.bF)(c,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"max-width":"300px"},placeholder:"Tìm kiếm font chữ ...",value:i.keyword,"onUpdate:value":t[0]||(t[0]=e=>i.keyword=e)},{prefix:(0,a.k6)(()=>[(0,a.bF)(r,{icon:"solar:magnifer-outline"})]),_:1},8,["value"])]),_:1}),(0,a.bF)(m,{style:{"margin-top":"12px","max-height":"calc(100vh - 300px)","min-height":"100px"}},{default:(0,a.k6)(()=>[0===l._filtered_font_list.length?((0,a.uX)(),(0,a.Wv)(d,{key:0})):(0,a.Q3)("",!0),(0,a.bF)(h,{gutter:12},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l._filtered_font_list,e=>((0,a.uX)(),(0,a.Wv)(u,{span:8},{default:(0,a.k6)(()=>[(0,a.Lk)("div",{onClick:t=>i.selected_font=e.name,class:(0,p.C4)({"font-item":!0,active:i.selected_font===e.name})},[(0,a.Lk)("div",null,[(0,a.Lk)("img",{src:l.getImage(e),alt:""},null,8,fe)]),(0,a.bF)(c,{justify:"center",class:"font-item__name"},{default:(0,a.k6)(()=>[(0,a.Lk)("span",null,(0,p.v_)(e.name),1)]),_:2},1024)],10,ge)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1},8,["action_text","onAction"])]),_:1},8,["show"])])}const be={class:"empty"};function ve(e,t,o,n,i,l){const r=(0,a.g2)("n-flex");return(0,a.uX)(),(0,a.CE)("div",be,[(0,a.bF)(r,{justify:"center"},{default:(0,a.k6)(()=>[...t[0]||(t[0]=[(0,a.Lk)("img",{src:"/img/empty.svg",alt:"",style:{width:"100%","max-width":"140px",opacity:".4"}},null,-1)])]),_:1}),(0,a.bF)(r,{justify:"center",style:{"font-size":"12px"}},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,(0,p.v_)(o.description),1)]),_:1})])}var ke={name:"component_empty",props:{description:{type:String,default:"Chưa có dữ liệu!"}},data(){return{}}};const ye=(0,h.A)(ke,[["render",ve]]);var we=ye,xe={name:"component__font-picker",components:{Component_empty:we,Component__modalContent:A},data(){return{font_list:[],selected_font:"",show:!1,keyword:"",callback:null,SERVER_URL:G}},computed:{_filtered_font_list(){let e=this.keyword.toLowerCase().trim();return this.font_list.filter(t=>t.keyword.includes(e))}},watch:{show:function(e){e&&0===this.font_list.length&&this.getFontList()}},beforeMount(){this.$AF.$fontPicker=({defaultFont:e})=>new Promise(t=>{this.selected_font=e||this.selected_font,this.callback=t,this.show=!0})},methods:{confirmSelectFont(){this.callback&&this.callback(this.selected_font),this.show=!1},getImage(e){return[G.replace("/api",""),"font_samples",e.image].join("/")},async getFontList(){let e=await(await this.$fetch.base.getFonts()).json();this.font_list=(e||[]).map(e=>({...e,keyword:e.name.toLowerCase()}))}}};const Ce=(0,h.A)(xe,[["render",_e]]);var Fe=Ce,Le=o(5888),$e=(0,a.pM)({name:"Provider",components:{Component__fontPicker:Fe,Component__download_gui:he,App:ie},data(){return{darkTheme:Le.a,viVN:r.A,dateViVN:s.A,theme_config:{fontSize:"13px",common:{primaryColor:"#2215b9",primaryColorHover:"#594fc5",primaryColorPressed:"#5d34af",primaryColorSuppl:"#0f31da",borderRadius:"5px",borderColor:"rgba(235,235,235,1)",borderWidth:0,backgroundColor:"#f5f5f5",fontSize:"13px",border:0,fontWeightStrong:"400",lineHeight:1.3,inputBackgroundColor:"red"},Select:{backgroundColor:"red",peers:{InternalSelection:{textColor:"#FF0000",backgroundColor:"red"}}}},show_login:!1,image_view:{path:""}}},beforeMount(){this.$AF.$imageView=e=>{this.image_view.path=e,this.$nextTick(()=>{this.$refs.image_view.click()})}},methods:{}});const Ve=(0,h.A)($e,[["render",l]]);var Ae=Ve,Ee=o(4458);(0,Ee.k)("/lib/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var je=o(782),Se=(0,je.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Pe=o(6587),Ue=o.n(Pe);const We={class:"file-picker"},Re=["id","accept","multiple"];function Te(e,t,o,n,i,l){return(0,a.uX)(),(0,a.CE)("div",We,[(0,a.Lk)("input",{type:"file",id:i.id,ref:"file_picker",accept:i.accept,multiple:i.max>1,onChange:t[0]||(t[0]=(...e)=>l.handleFileChange&&l.handleFileChange(...e))},null,40,Re)])}var Ie={name:"component__file-picker",data(){return{accept:z.IMAGE,max:1,resolve:null,file_picker:(0,a.rk)("file_picker"),id:"",listener:null,blob:!0}},beforeMount(){this.id="file_picker_"+this.generateCode(24),K.$picker=({accept:e,max:t,blob:o=!0})=>new Promise(n=>{this.max=t||1,this.accept=e||z.IMAGE,this.resolve=n,this.blob=o,this.$nextTick(()=>{this.file_picker.click()})})},mounted(){},beforeDestroy(){},methods:{handleFileChange:function(e){let t=e.clipboardData||{},o=t.files||t.items,n=(e.target||{}).files||(e.dataTransfer||{}).files||o||[],a=[];for(let i=0;i<n.length;i++){let e=n[i];if(this.blob){let t=new Blob([e],{type:e.type,name:e.name});a.push(t)}else a.push(e)}if(a.length>this.max)return this.$AF.$msg.error(`Bạn chỉ được chọn tối đa ${this.max} tệp`),0;this.resolve&&this.resolve(1===this.max?a[0]:a),this.file_picker.value=null}}};const Oe=(0,h.A)(Ie,[["render",Te]]);var Xe=Oe;const Ne={class:"image-cropper"};function Me(e,t,o,n,i,l){return(0,a.uX)(),(0,a.CE)("div",Ne)}var Be={name:"component__image-cropper",data(){return{}}};const De=(0,h.A)(Be,[["render",Me]]);var qe=De;const Ge={class:"input-text-auto"},ze=["id"],Je=["value"];function He(e,t,o,i,l,r){return(0,a.uX)(),(0,a.CE)("div",Ge,[(0,a.bo)((0,a.Lk)("textarea",{id:l.el_id,rows:"1",onKeyup:t[0]||(t[0]=(...e)=>r.calculateHeight&&r.calculateHeight(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>l.scopeValue=e),onMouseup:t[2]||(t[2]=(...e)=>r.calculateHeight&&r.calculateHeight(...e))},null,40,ze),[[n.Jo,l.scopeValue]]),(0,a.Lk)("textarea",{value:l.scopeValue,class:(0,p.C4)("fn__hidden_textarea fn_hide_"+l.el_id),rows:"1",tabindex:"-1"},null,10,Je)])}var Ke={name:"component__input-text",props:{modelValue:{type:String,default:()=>"222"}},data(){return{scopeValue:"1",el_id:""}},watch:{modelValue:function(e){e!==this.scopeValue&&(this.scopeValue=e)},scopeValue:function(e){this.$emit("update:modelValue",e)}},beforeMount(){this.el_id=`input_text_${this.generateCode(24)}`,this.scopeValue=this.modelValue},mounted(){this.calculateHeight()},methods:{calculateHeight(){let e=this.jquery("#"+this.el_id),t=34,o=4,n=22,a=this.jquery(".fn_hide_"+this.el_id)[0],i=a.scrollHeight-t,l=Math.floor(i/n);e.css({height:l*n+t+o})}}};const Qe=(0,h.A)(Ke,[["render",He]]);var Ye=Qe;const Ze={class:"fn__toggle"},et={class:"t_in"},tt=["disabled"];function ot(e,t,o,i,l,r){return(0,a.uX)(),(0,a.CE)("label",Ze,[(0,a.Lk)("span",et,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>l.scopeValue=e),disabled:o.disabled},null,8,tt),[[n.lH,l.scopeValue]]),t[1]||(t[1]=(0,a.Lk)("span",{class:"t_slider"},null,-1)),t[2]||(t[2]=(0,a.Lk)("span",{class:"t_content"},null,-1))]),(0,a.RG)(e.$slots,"default")])}var nt={name:"component__switch",props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{scopeValue:!1}},watch:{modelValue:function(e){e!==this.scopeValue&&(this.scopeValue=e)},scopeValue:function(e){e!==this.modelValue&&this.$emit("update:modelValue",e)}},beforeMount(){this.scopeValue=this.modelValue}};const at=(0,h.A)(nt,[["render",ot]]);var it=at;const lt={class:"all_models"};function rt(e,t,o,n,i,l){return(0,a.uX)(),(0,a.CE)("div",{class:(0,p.C4)({fn__select_model:!0,opened:i.is_open})},[(0,a.Lk)("a",{class:"model_open",onClick:t[0]||(t[0]=e=>l.handleTrigger("click")),onMouseover:t[1]||(t[1]=e=>l.handleTrigger("over"))},[(0,a.RG)(e.$slots,"ref")],32),(0,a.Lk)("div",lt,[(0,a.RG)(e.$slots,"default")])],2)}var st={name:"component__popover",props:{trigger:{type:String,default:"click"}},data(){return{is_open:!1}},methods:{handleTrigger(e="click"){if(e!==this.trigger)return 0;this.is_open=!this.is_open}}};const ct=(0,h.A)(st,[["render",rt]]);var dt=ct;const ut=["id"],pt=["value"];function ht(e,t,o,i,l,r){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.scopeValue=e),id:l.id},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.options,e=>((0,a.uX)(),(0,a.CE)("option",{value:e[0]},(0,p.v_)(e[1]),9,pt))),256))],8,ut)),[[n.u1,l.scopeValue]])}var mt={name:"component__select-single",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]}},data(){return{scopeValue:"",id:""}},watch:{modelValue:function(e){e!==this.scopeValue&&(this.scopeValue=!1)},scopeValue:function(e){e!==this.modelValue&&this.$emit("update:modelValue",e)}},beforeMount(){this.id=`select-single-${this.generateCode(24)}`,this.scopeValue=this.modelValue}};const gt=(0,h.A)(mt,[["render",ht]]);var ft=gt;const _t={href:"javascript:0;",class:"sidebar__trigger"};function bt(e,t,o,n,i,l){const r=(0,a.g2)("Icon");return(0,a.uX)(),(0,a.CE)("a",_t,[(0,a.bF)(r,{icon:"solar:settings-broken",height:"24"})])}var vt={name:"component__sidebar-page-trigger",components:{Icon:d.In},data(){return{}}};const kt=(0,h.A)(vt,[["render",bt]]);var yt=kt;const wt={class:"fn__range"},xt={class:"range_in"},Ct=["min","max"],Ft={class:"value"};function Lt(e,t,o,i,l,r){return(0,a.uX)(),(0,a.CE)("div",wt,[(0,a.Lk)("div",xt,[(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=e=>l.scopeValue=e),min:o.min,max:o.max},null,8,Ct),[[n.Jo,l.scopeValue]]),t[1]||(t[1]=(0,a.Lk)("div",{class:"slider"},null,-1))]),(0,a.Lk)("div",Ft,(0,p.v_)(l.scopeValue),1)])}var $t={name:"component__slider",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100}},data(){return{scopeValue:this.modelValue}},watch:{modelValue:function(e){e!==this.scopeValue&&(this.scopeValue=e)},scopeValue:function(e){e!==this.modelValue&&this.$emit("update:modelValue",e)}}};const Vt=(0,h.A)($t,[["render",Lt]]);var At=Vt;const Et=["title"];function jt(e,t,o,n,i,l){return(0,a.uX)(),(0,a.CE)("span",{class:"fn__tooltip",title:o.content},[(0,a.RG)(e.$slots,"default")],8,Et)}var St={name:"component__tooltip",props:{content:{type:String,default:""}},data(){return{}}};const Pt=(0,h.A)(St,[["render",jt]]);var Ut=Pt,Wt=o(6777);const Rt=(0,n.Ef)(Ae);let Tt={base:new g({service_port:5e3})};Rt.component("component__file-picker",Xe).component("component__image-cropper",qe).component("component__input-number",k).component("component__input-text",Ye).component("component__switch",it).component("component__popover",dt).component("component__select-single",ft).component("component__sidebar-page-trigger",yt).component("component__slider",At).component("component__tooltip",Ut).component("Icon",d.In),Rt.config.globalProperties.$fetch=Tt,Rt.config.globalProperties.jquery=Ue(),Rt.config.globalProperties.timestamp=e=>Math.floor(new Date(e).getTime()/1e3),Rt.config.globalProperties.generateCode=e=>{let t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=o.length;for(let a=0;a<e;a++)t+=o.charAt(Math.floor(Math.random()*n));return t},Rt.config.globalProperties.sleep=e=>new Promise(t=>{setTimeout(()=>{t()},e)}),Rt.config.globalProperties.$AF=K,Rt.config.globalProperties.unbindObj=e=>JSON.parse(JSON.stringify(e)),Rt.config.globalProperties.overrideObj=(e,t)=>{let o=Rt.config.globalProperties.unbindObj(t);Object.keys(o).forEach(t=>{e[t]!==o[t]&&(e[t]=o[t])})},Rt.config.globalProperties.removeUnicode=e=>"undefined"===typeof e?"":(e=e.toString().toLowerCase(),e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),e=e.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),e=e.replace(/ì|í|ị|ỉ|ĩ/g,"i"),e=e.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),e=e.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),e=e.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),e=e.replace(/đ/g,"d"),e),Rt.config.globalProperties.srcCDN=Q,Rt.config.globalProperties.imageCDN=Q,Rt.config.globalProperties.INPUT_FILE_TYPE=z,Rt.config.globalProperties.createMenuOptions=J,Rt.config.globalProperties.menuOptionsFunctions=Y,Rt.use(Se).use(q).use(Wt.A).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,i){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var r=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(o.O).every(function(e){return o.O[e](n[s])})?n.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,l=n[0],r=n[1],s=n[2],c=0;if(l.some(function(t){return 0!==e[t]})){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(s)var d=s(o)}for(t&&t(n);c<l.length;c++)i=l[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self["webpackChunkphotobooth_client"]=self["webpackChunkphotobooth_client"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],function(){return o(7405)});n=o.O(n)})();